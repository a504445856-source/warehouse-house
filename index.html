<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ“¦ Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø¨ÙŠØª</title>

  <style>
    :root{
      --b:#2563eb;
      --bg:#f6f7fb;
      --card:#ffffff;
      --ok:#10b981;
      --warn:#f59e0b;
      --bd:#e5e7eb;
      --txt:#111827;
      --r:14px;
      --shadow:0 10px 25px rgba(0,0,0,.08);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",Tahoma,Arial;
      background:var(--bg);
      color:var(--txt);
    }

    header{
      background:var(--card);
      border-bottom:1px solid var(--bd);
      padding:14px;
      position:sticky;
      top:0;
      z-index:10;
    }

    header h1{
      margin:0;
      font-size:20px;
      display:flex;
      gap:8px;
      align-items:center;
    }

    main{
      padding:16px;
      max-width:1100px;
      margin:auto;
    }

    .grid{
      display:grid;
      gap:16px;
    }

    @media(min-width:900px){
      .grid{
        grid-template-columns:1fr 1.2fr;
      }
    }

    .card{
      background:var(--card);
      border:1px solid var(--bd);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      padding:14px;
    }

    h2{
      margin:0 0 12px;
      font-size:16px;
    }

    label{
      font-size:13px;
      color:#374151;
      margin-bottom:4px;
      display:block;
    }

    input, select, textarea, button{
      width:100%;
      padding:10px;
      border-radius:10px;
      border:1px solid var(--bd);
      font-size:14px;
      font-family:inherit;
    }

    textarea{resize:vertical}

    .row{
      display:grid;
      gap:10px;
    }

    @media(min-width:600px){
      .row{
        grid-template-columns:1fr 1fr;
      }
    }

    .actions{
      display:grid;
      gap:10px;
      grid-template-columns:1fr 1fr 1fr;
      margin-top:10px;
    }

    .btn{
      cursor:pointer;
      border:none;
      color:#fff;
      font-weight:600;
    }

    .save{background:var(--b)}
    .clear{background:#9ca3af}
    .sync{background:#111827}

    .item{
      display:grid;
      gap:10px;
      grid-template-columns:auto 1fr auto;
      align-items:center;
      padding:10px;
      border-radius:12px;
      border:1px solid var(--bd);
      margin-bottom:10px;
      background:#fafafa;
    }

    .item img{
      width:56px;
      height:56px;
      object-fit:cover;
      border-radius:10px;
      border:1px solid var(--bd);
    }

    .tag{
      font-size:12px;
      background:#eef2ff;
      color:#1e40af;
      padding:2px 8px;
      border-radius:999px;
      margin-inline-start:6px;
    }

    .danger{
      background:#ef4444;
      color:#fff;
      border:none;
      border-radius:8px;
      padding:6px 10px;
      cursor:pointer;
    }

    .edit{
      background:#f59e0b;
      color:#fff;
      border:none;
      border-radius:8px;
      padding:6px 10px;
      cursor:pointer;
      margin-left:6px;
    }
  </style>
</head>

<body>
<header>
  <h1>ğŸ“¦ Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø¨ÙŠØª</h1>
</header>

<main>
  <div class="grid">

    <!-- Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ -->
    <div class="card">
      <h2>Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ ØºØ±Ø¶</h2>

      <input type="hidden" id="editIndex" />

      <label>Ø§Ø³Ù… Ø§Ù„ØºØ±Ø¶</label>
      <input id="name" placeholder="Ù…Ø«Ø§Ù„: Ù…ÙÙƒ ÙƒØ¨ÙŠØ±" />

      <label>Ø§Ù„ØªØµÙ†ÙŠÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
      <input id="category" placeholder="Ø£Ø¯ÙˆØ§Øª / ÙƒÙ‡Ø±Ø¨Ø§Ø¡ / Ù…Ø·Ø¨Ø®" />

      <div class="row">
        <div>
          <label>Ø±Ù‚Ù… Ø§Ù„Ø±Ù *</label>
          <input id="shelf" />
        </div>
        <div>
          <label>Ø§Ù„Ø¬Ù‡Ø©</label>
          <input id="side" />
        </div>
      </div>

      <div class="row">
        <div>
          <label>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</label>
          <input id="level" />
        </div>
        <div>
          <label>Ù…Ù†Ø·Ù‚Ø© / Ù‚Ø³Ù…</label>
          <input id="zone" />
        </div>
      </div>

      <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
      <textarea id="notes" rows="3"></textarea>

      <label>ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
      <input id="image" type="file" accept="image/*" />

      <div class="actions">
        <button class="btn sync" onclick="sync()">Ù…Ø²Ø§Ù…Ù†Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</button>
        <button class="btn clear" onclick="clearForm()">Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„</button>
        <button class="btn save" onclick="save()">Ø­ÙØ¸</button>
      </div>
    </div>

    <!-- Ø§Ù„Ø¹Ø±Ø¶ -->
    <div class="card">
      <h2>Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¹Ø±Ø¶</h2>
      <input id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø±Ù" oninput="render()" />
      <div id="list"></div>
    </div>

  </div>
</main>

<script>
let items = JSON.parse(localStorage.getItem("warehouse_items") || "[]");

function save(){
  const name = nameInput.value.trim();
  if(!name) return alert("Ø§Ø³Ù… Ø§Ù„ØºØ±Ø¶ Ù…Ø·Ù„ÙˆØ¨");

  const obj = {
    name,
    category:category.value,
    shelf:shelf.value,
    side:side.value,
    level:level.value,
    zone:zone.value,
    notes:notes.value,
    date:new Date().toLocaleDateString("ar-SA"),
    image:""
  };

  const idx = editIndex.value;
  const file = image.files[0];

  if(file){
    const reader = new FileReader();
    reader.onload = e=>{
      obj.image = e.target.result;
      finalize(obj, idx);
    };
    reader.readAsDataURL(file);
  }else{
    finalize(obj, idx);
  }
}

function finalize(obj, idx){
  if(idx===""){
    items.push(obj);
  }else{
    items[idx] = obj;
  }
  localStorage.setItem("warehouse_items", JSON.stringify(items));
  clearForm();
  render();
}

function render(){
  const q = search.value.trim();
  list.innerHTML = "";
  items
    .filter(i => !q || i.name.includes(q) || i.shelf.includes(q))
    .forEach((i, idx)=>{
      const div = document.createElement("div");
      div.className="item";
      div.innerHTML = `
        ${i.image ? `<img src="${i.image}">` : `<img src="https://via.placeholder.com/56">`}
        <div>
          <strong>${i.name}</strong>
          ${i.category ? `<span class="tag">${i.category}</span>`:""}
          <div>Ø±Ù ${i.shelf} - ${i.side} - ${i.level}</div>
        </div>
        <div>
          <button class="edit" onclick="edit(${idx})">ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="danger" onclick="del(${idx})">Ø­Ø°Ù</button>
        </div>
      `;
      list.appendChild(div);
    });
}

function edit(i){
  const o = items[i];
  nameInput.value=o.name;
  category.value=o.category;
  shelf.value=o.shelf;
  side.value=o.side;
  level.value=o.level;
  zone.value=o.zone;
  notes.value=o.notes;
  editIndex.value=i;
}

function del(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„ØºØ±Ø¶ØŸ")){
    items.splice(i,1);
    localStorage.setItem("warehouse_items", JSON.stringify(items));
    render();
  }
}

function clearForm(){
  document.querySelectorAll("input,textarea").forEach(i=>i.value="");
  editIndex.value="";
}

function sync(){
  localStorage.setItem("warehouse_items", JSON.stringify(items));
  alert("ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©");
}

render();
</script>

</body>
</html>
